---
description: Must read when adding translation keys or working with i18n
alwaysApply: false
---

# AgentifUI å›½é™…åŒ–å¼€å‘è§„èŒƒ

## æ ¸å¿ƒæ¶æ„

AgentifUI ä½¿ç”¨ next-intl è¿›è¡Œå›½é™…åŒ–ï¼Œé‡‡ç”¨ç»Ÿä¸€çš„JSONé…ç½®æ¶æ„ï¼š

- **é»˜è®¤è¯­è¨€**: ä¸­æ–‡ç®€ä½“ï¼ˆzh-CNï¼‰ï¼Œä½œä¸ºæºè¯­è¨€
- **æ”¯æŒè¯­è¨€**: 10ç§è¯­è¨€ï¼ˆzh-CN, en-US, es-ES, zh-TW, ja-JP, de-DE, fr-FR, ru-RU, it-IT, pt-PTï¼‰
- **æ¡†æ¶**: next-intl é…åˆ Next.js 15 App Router
- **éªŒè¯å·¥å…·**: pnpm scriptså°è£…çš„Pythonè„šæœ¬è¿›è¡Œç»“æ„ä¸€è‡´æ€§éªŒè¯

## ç›®å½•ç»“æ„

```
messages/
â”œâ”€â”€ zh-CN.json        # ä¸­æ–‡ç®€ä½“ï¼ˆä¸»è¦è¯­è¨€ï¼‰
â”œâ”€â”€ en-US.json        # è‹±æ–‡
â”œâ”€â”€ es-ES.json        # è¥¿ç­ç‰™æ–‡  
â”œâ”€â”€ zh-TW.json        # ç¹ä½“ä¸­æ–‡
â”œâ”€â”€ ja-JP.json        # æ—¥æ–‡
â”œâ”€â”€ de-DE.json        # å¾·æ–‡
â”œâ”€â”€ fr-FR.json        # æ³•æ–‡
â”œâ”€â”€ ru-RU.json        # ä¿„æ–‡
â”œâ”€â”€ it-IT.json        # æ„å¤§åˆ©æ–‡
â””â”€â”€ pt-PT.json        # è‘¡è„ç‰™æ–‡

i18n/
â””â”€â”€ request.ts        # next-intlé…ç½®
```

## éªŒè¯å·¥å…·

é¡¹ç›®æä¾›äº†i18néªŒè¯å·¥å…·é“¾ï¼š

```bash
# å¿«é€Ÿæ£€æŸ¥ç»“æ„ä¸€è‡´æ€§
pnpm run i18n:check

# è¯¦ç»†éªŒè¯ï¼ˆåŒ…å«æ›´å¤šæ£€æŸ¥ï¼‰
pnpm run i18n:validate

# æ£€æµ‹ç¼ºå¤±çš„é”®ï¼ˆæ˜¾ç¤ºè¡Œå·ä½ç½®ï¼‰
pnpm run i18n:detect
```

## å¼€å‘å·¥ä½œæµç¨‹

### 1. æ·»åŠ æ–°ç¿»è¯‘é”®ï¼ˆä¸¥æ ¼éµå¾ªï¼‰

**ç¬¬ä¸€æ­¥**: åœ¨ `messages/zh-CN.json` ä¸­æ·»åŠ ç¿»è¯‘é”®
```json
{
  "pages": {
    "admin": {
      "newFeature": {
        "title": "æ–°åŠŸèƒ½æ ‡é¢˜",
        "description": "åŠŸèƒ½æè¿°",
        "actions": {
          "save": "ä¿å­˜",
          "cancel": "å–æ¶ˆ"
        }
      }
    }
  }
}
```

**ç¬¬äºŒæ­¥**: åœ¨å…¶ä»–9ä¸ªè¯­è¨€æ–‡ä»¶ä¸­æ‰‹åŠ¨æ·»åŠ ç›¸åŒç»“æ„çš„é”®
```json
// en-US.json
{
  "pages": {
    "admin": {
      "newFeature": {
        "title": "New Feature Title",
        "description": "Feature description",
        "actions": {
          "save": "Save",
          "cancel": "Cancel"
        }
      }
    }
  }
}
```

**ç¬¬ä¸‰æ­¥**: ç«‹å³éªŒè¯ä¸€è‡´æ€§

### 2. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

```tsx
import { useTranslations } from 'next-intl';

const AdminComponent = () => {
  const t = useTranslations('pages.admin.newFeature');

  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('description')}</p>
      <button>{t('actions.save')}</button>
      <button>{t('actions.cancel')}</button>
    </div>
  );
};
```

### 3. éªŒè¯ä¸€è‡´æ€§

```bash
# éªŒè¯æ‰€æœ‰è¯­è¨€æ–‡ä»¶ç»“æ„ä¸€è‡´æ€§
pnpm run i18n:check

# TypeScriptç±»å‹æ£€æŸ¥
pnpm run type-check
```

## å‘½åè§„èŒƒ

### å±‚æ¬¡ç»“æ„ç»„ç»‡

```json
{
  "common": {
    "ui": {          // é€šç”¨UIå…ƒç´ 
      "buttons": {...},
      "forms": {...},
      "modals": {...}
    }
  },
  "pages": {         // é¡µé¢ç‰¹å®šå†…å®¹
    "admin": {
      "apiConfig": {...},
      "users": {...}
    },
    "chat": {...},
    "settings": {...}
  },
  "components": {    // å¯å¤ç”¨ç»„ä»¶
    "sidebar": {...},
    "navbar": {...}
  }
}
```

### å‚æ•°åŒ–ç¿»è¯‘

```json
{
  "messages": {
    "welcome": "æ¬¢è¿ {name} ä½¿ç”¨ AgentifUI",
    "itemCount": "å…± {count} ä¸ªé¡¹ç›®"
  }
}
```

```tsx
// ä½¿ç”¨å‚æ•°åŒ–ç¿»è¯‘
const t = useTranslations('messages');
<p>{t('welcome', { name: 'John' })}</p>
<span>{t('itemCount', { count: 42 })}</span>
```

## æœ€ä½³å®è·µ

### åŠŸèƒ½åŸŸåˆ†ç¦»

- **common.ui**: é€šç”¨UIå…ƒç´ ï¼ˆæŒ‰é’®ã€è¡¨å•ã€æ¨¡æ€æ¡†ï¼‰
- **pages.admin**: ç®¡ç†åå°ç‰¹å®šåŠŸèƒ½
- **pages.chat**: èŠå¤©ç›¸å…³åŠŸèƒ½
- **pages.settings**: è®¾ç½®é¡µé¢
- **components**: å¯å¤ç”¨ç»„ä»¶æ–‡æ¡ˆ

### å¼€å‘æµç¨‹è§„èŒƒ

```bash
# 1. ä¿®æ”¹ç¿»è¯‘æ–‡ä»¶
# 2. ç«‹å³éªŒè¯
pnpm run i18n:check

# 3. TypeScriptæ£€æŸ¥
pnpm run type-check

# 4. æäº¤ä»£ç 
git add . && git commit -m "feat(i18n): add new feature translations"
```

## æ•…éšœæ’é™¤

### éªŒè¯å‘½ä»¤

```bash
# å¿«é€Ÿæ£€æŸ¥
pnpm run i18n:check

# è¯¦ç»†éªŒè¯
pnpm run i18n:validate

# æ£€æµ‹ç¼ºå¤±é”®
pnpm run i18n:detect

# æŸ¥æ‰¾ç¡¬ç¼–ç æ–‡æœ¬
grep -r "[\\u4e00-\\u9fa5]" components/ --include="*.tsx" --exclude-dir=node_modules
```

## æ ¸å¿ƒè§„åˆ™

1. **ğŸš« ç¦æ­¢ç¡¬ç¼–ç **: ä»»ä½•ç”¨æˆ·å¯è§æ–‡æœ¬éƒ½ä¸èƒ½ç¡¬ç¼–ç 
2. **âœ… ç»“æ„ä¸€è‡´**: æ‰€æœ‰è¯­è¨€æ–‡ä»¶å¿…é¡»ä¿æŒç›¸åŒçš„é”®ç»“æ„
3. **ğŸ” åŠæ—¶éªŒè¯**: æ¯æ¬¡ä¿®æ”¹åç«‹å³è¿è¡ŒéªŒè¯è„šæœ¬
4. **ğŸ“ æ¸…æ™°å‘½å**: ä½¿ç”¨æè¿°æ€§çš„é”®åå’Œå±‚æ¬¡ç»“æ„
5. **ğŸ¯ åŠŸèƒ½åˆ†ç»„**: æŒ‰åŠŸèƒ½åŸŸç»„ç»‡ç¿»è¯‘é”®

4. **ğŸ“ æ¸…æ™°å‘½å**: ä½¿ç”¨æè¿°æ€§çš„é”®åå’Œå±‚æ¬¡ç»“æ„
5. **ï¿½ï¿½ åŠŸèƒ½åˆ†ç»„**: æŒ‰åŠŸèƒ½åŸŸç»„ç»‡ç¿»è¯‘é”®
